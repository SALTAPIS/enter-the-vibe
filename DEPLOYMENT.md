# Deployment Guide for Enter the Vibe

## Issues Fixed for Live Server Deployment

### 1. JSON File Loading Issues
- **Problem**: 404 errors when loading `data/credits.json` and `data/app-config.json`
- **Solution**: Added fallback paths and copied data files to `public/data/`
- **Files affected**: `src/script.js` (enhanced error handling)

### 2. Static Asset Paths
- **Problem**: Relative paths not resolving correctly on different servers
- **Solution**: Multiple fallback paths tried in sequence:
  - `./data/credits.json` (original)
  - `/data/credits.json` (absolute)
  - `./public/data/credits.json` (Vite dev)
  - `/public/data/credits.json` (some deployments)
  - `data/credits.json` (fallback)

### 3. Hardcoded Fallback Credits
- **Problem**: If all JSON loading fails, app would break
- **Solution**: Added hardcoded pioneer credits as final fallback

## Deployment Steps

### For Vite Build (Recommended)
```bash
# 1. Install dependencies
npm install

# 2. Build for production
npm run build

# 3. Deploy the 'dist' folder to your server
# The data files are automatically included via public/data/
```

### For Static File Server
```bash
# 1. Ensure data files are in public/data/
cp -r data public/

# 2. Deploy all files including:
# - index.html
# - src/
# - public/
# - All other assets
```

## Server Configuration

### Apache (.htaccess)
```apache
# Enable CORS for JSON files
<FilesMatch "\.(json)$">
    Header set Access-Control-Allow-Origin "*"
</FilesMatch>

# Ensure proper MIME types
AddType application/json .json
```

### Nginx
```nginx
location ~* \.(json)$ {
    add_header Access-Control-Allow-Origin *;
    add_header Content-Type application/json;
}
```

## Troubleshooting

### Credits Not Showing
1. **Check browser console** for 404 errors
2. **Verify data files exist** at `/public/data/credits.json`
3. **Check network tab** to see which paths are being tried
4. **Look for fallback message**: "All credit loading attempts failed, using hardcoded fallback"

### HeroUI Component Errors
- These are non-critical and won't prevent credits from showing
- The app will continue to work without the control panel

### Audio Issues
- Ensure audio files are in `public/sounds/`
- Check browser autoplay policies
- Audio will start when intro sequence begins

## File Structure for Deployment
```
dist/ (or root)
├── index.html
├── src/
│   └── script.js
├── public/
│   ├── data/
│   │   ├── credits.json
│   │   └── app-config.json
│   ├── sounds/
│   ├── fonts/
│   └── ...
└── assets/ (generated by Vite)
```

## Testing Deployment
1. Open browser developer tools
2. Check console for any 404 errors
3. Verify credits sequence starts after intro
4. Test audio playback
5. Check that beat detection works

## Common Issues
- **CORS errors**: Configure server headers
- **404 on JSON files**: Ensure files are in correct location
- **Audio not playing**: Check autoplay policies
- **Fonts not loading**: Verify font files are accessible 